
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>TP : D√©couverte du CLI</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/claat-public/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="1TSIO_codelab_decouverte_du_CLI"
                  title="TP : D√©couverte du CLI"
                  environment="web"
                  feedback-link="">
    
      <google-codelab-step label="Rendu √©crit" duration="5">
        <p>Dans ce TP vous allez √™tre amen√© √† r√©pondre √† des questions. </p>
<ul>
<li>Vous devrez √©crire ces r√©ponses sur une feuille double A4 et √©crire le titre du TP (situ√© en haut √† gauche de ce site). </li>
<li>Vous devrez √©galement indiquer votre nom, pr√©nom, classe. </li>
<li>Vous utiliserez un stylo de couleur noir ou bleu. </li>
<li>Vous pr√©ciserez le num√©ro de la question lors de la r√©daction de vos r√©ponses. (Vous n&#39;√™tes pas oblig√© de recopier les questions)</li>
</ul>
<p class="image-container"><img style="width: 718.11px" src="img\\9e98e2e9eb935ddf.jpeg"></p>
<aside class="warning"><p>Si les conditions sp√©cifi√©es pr√©c√©demment ne sont pas remplies au moment de l&#39;examen, des points de p√©nalit√© peuvent s&#39;appliquer.</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Connection au port console du switch" duration="10">
        <h2 is-upgraded>Mat√©riels n√©cessaire</h2>
<p class="image-container"><img style="width: 561.00px" src="img\\c3d0207d95433118.png"></p>
<table>
<tr><td colspan="1" rowspan="1"><p><strong>1</strong></p>
</td><td colspan="1" rowspan="1"><p>Commutateur Catalyst 2960-S</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p><strong>2</strong></p>
</td><td colspan="1" rowspan="1"><p>Cordon d&#39;alimentation CA</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p><strong>13</strong></p>
</td><td colspan="1" rowspan="1"><p>C√¢ble de console ou c√¢ble USB</p>
</td></tr>
<tr><td colspan="2" rowspan="1"><p><strong>Un ordinateur avec un programme d&#39;√©mulation de terminal comme par exemple PuTTy</strong></p>
</td></tr>
</table>
<h2 is-upgraded>R√©initialisation du commutateur</h2>
<p>Assurez-vous qu&#39;aucun √©l√©ment n&#39;est connect√© au commutateur.</p>
<p class="image-container"><img style="width: 211.96px" src="img\\7395e75a26430a22.png"></p>
<p>Alimentez le commutateur en connectant le cordon d&#39;alimentation CA √† l&#39;alimentation du commutateur et √† une prise de courant CA mise √† la masse.</p>
<p class="image-container"><img style="width: 225.00px" src="img\\8c219729fcb46693.png"></p>
<p>Environ 30 secondes apr√®s sa mise sous tension, le commutateur lance l&#39;autotest √† la mise sous tension (POST),</p>
<p>Lors de cet autotest √† la mise sous tension (POST), le voyant LED SYSTEM clignote en vert et les voyants LED RPS, STATUS, DUPLEX et SPEED restent verts. </p>
<p>Une fois l&#39;autotest √† la mise sous tension (POST) effectu√©, le voyant LED SYSTEM reste vert et les autres voyants LED s&#39;√©teignent, √† l&#39;exception du voyant LED STAT suivant les situations.</p>
<p>Pour r√©initialiser le commutateur, appuyez sur le bouton Mode et maintenez-le enfonc√©. Apr√®s environ 3 secondes, les LED du commutateur commencent √† clignoter. Continuez √† maintenir le bouton Mode enfonc√©. Les DEL cessent de clignoter apr√®s 7 secondes suppl√©mentaires, puis le commutateur red√©marre. </p>
<p class="image-container"><img style="width: 225.00px" src="img\\f903d63a37f70415.png"></p>
<h2 is-upgraded>Acc√®s √† la CLI via PuTTY avec une connexion console</h2>
<p>Connectez le c√¢ble d&#39;adaptateur RJ-45 √† DB-9 fourni au port s√©rie √† 9 broches de raccordement sur le PC. Connectez l&#39;autre extr√©mit√© du c√¢ble au port de console du commutateur.</p>
<p class="image-container"><img style="width: 193.00px" src="img\\8decf9a4278e7354.png"></p>
<h2 is-upgraded>Pour les utilisateurs sur une machine Windows</h2>
<iframe class="youtube-video" src="https://www.youtube.com/embed/kybFcWoEuco?rel=0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 is-upgraded>Pour les utilisateurs sur une machine Ubuntu</h2>
<p>Dans PuTTy, dans le champ &#34;Serial line&#34;, mettre la valeur <code>ttys1</code> au lieu de COM</p>
<p class="image-container"><img style="width: 693.00px" src="img\\5e42e049ecdc5da2.png"></p>
<h2 is-upgraded>Affichage de la CLI</h2>
<p>Apr√®s toutes les manipulations pr√©c√©dentes, une fen√™tre devrait s&#39;ouvrir contenant la CLI.</p>
<p>Si le message suivant appara√Æt :</p>
<pre>Would you like to enter the initial configuration dialog? [yes/no]:</pre>
<p>Taper <code>no </code></p>
<p class="image-container"><img style="width: 718.11px" src="img\\c2ca508dac39a00b.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="User EXEC Mode" duration="5">
        <p>Une fois connect√© √† un p√©riph√©rique, vous pouvez d√©sormais le configurer.</p>
<p>Sur Cisco IOS la CLI est organis√©e selon une structure hi√©rarchique de mode.</p>
<aside class="special"><p><strong>‚ù§ Quelles sont les 4 modes principaux dans Cisco IOS ? </strong></p>
<p>En partant de la configuration la plus simple √† la plus sp√©cialis√©e, les modes principaux sont les suivants :</p>
<ol type="1" start="1">
<li>User EXEC Mode (Mode d&#39;ex√©cution utilisateur)</li>
<li>Privileged EXEC Mode (Mode d&#39;ex√©cution privil√©gi√©)</li>
<li>Global configuration Mode (Mode de configuration globale)</li>
<li>Autres modes de configuration sp√©cifiques tels que le mode de configuration d&#39;interface</li>
</ol>
</aside>
<p>Structure hi√©rarchique des modes IOS</p>
<p class="image-container"><img style="width: 500.00px" src="img\\abc7e39b3677e286.png"></p>
<aside class="special"><p><strong>‚ù§ Comment savoir quel mode est utilis√© en regardant uniquement l&#39;invite de la CLI ?</strong></p>
<p>Chaque mode se reconna√Æt facilement dans la CLI : l&#39;invite se termine par un symbole particulier. </p>
</aside>
<p>Par exemple si l&#39;invite se termine par le symbole # alors cela signifie que l&#39;on est en mode Global configuration : </p>
<pre>S1#</pre>
<ol type="1" start="1">
<li>Regarder votre CLI, dans quel mode √™tes-vous actuellement ? Justifier votre r√©ponse.</li>
</ol>
<p>Dans la commande pr√©c√©dente, le nom de l&#39;h√¥te √©tait <code>S1</code>.</p>
<p class="image-container"><img style="width: 495.00px" src="img\\54899f65b685e635.png"></p>
<ol type="1" start="2">
<li>Observer votre CLI, quel est le nom du p√©riph√©rique ?</li>
</ol>
<ul>
<li>Les utilisateurs peuvent lire certaines informations mais ne peuvent pas configurer l&#39;appareil.</li>
<li>C&#39;est pourquoi ce mode est souvent appel√© &#34;user mode&#34; = mode en lecture seul.</li>
</ul>
<aside class="special"><p><strong>‚ù§ Peut-on faire beaucoup de choses dans le mode utilisateur ?</strong></p>
<p>Non, le mode utilisateur est tr√®s limit√©.</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Privileged EXEC Mode" duration="5">
        <p>Entrer la commande : </p>
<pre>&gt;enable</pre>
<p>Vous √™tes maintenant dans le mode privil√©gi√©.</p>
<ol type="1" start="3">
<li>‚ù§ Quel est le symbole qui se trouve au bout de la ligne de commande ?</li>
</ol>
<ul>
<li>Le mode privil√©gi√© vous donne le droit de voir la configuration de l&#39;appareil, de le restart etc...</li>
<li>Avec ce mode vous ne pouvez pas changer la configuration. Cependant vous pouvez tout de m√™me faire quelques manips comme par exemple changer l&#39;heure ou sauvegarder la config.</li>
</ul>
<h2 is-upgraded>Comparaison entre les modes User EXEC et Privileged EXEC</h2>
<p>Dans la CLI taper la commande suivante : </p>
<pre>#?</pre>
<p>Pour afficher d&#39;autres commandes, appuyer sur la touche espace : </p>
<p class="image-container"><img style="width: 669.00px" src="img\\3c1674d7842ee67.png"></p>
<ol type="1" start="4">
<li>D&#39;apr√®s vous, √† quoi sert cette commande ?</li>
</ol>
<p>Pour annuler la commande faire <code>CTRL + C</code></p>
<p>Pour revenir au mode pr√©c√©dent taper : </p>
<pre>#exit</pre>
<ol type="1" start="5">
<li>D&#39;apr√®s vous quel mode poss√®de le plus de commandes ? Justifier votre r√©ponse</li>
</ol>


      </google-codelab-step>
    
      <google-codelab-step label="Les raccourcis Cisco dans la CLI" duration="10">
        <p>Une fonctionnalit√© utile de la CLI est la touche <code>TAB</code>. Placez vous dans le mode utilisateur, puis effectuer la manipulation pr√©sent√©e ci-dessous.</p>
<p class="image-container"><img style="width: 718.11px" src="img\\4a820b3240277778.png"></p>
<aside class="special"><p><strong>‚ù§ A quoi sert la touche </strong><strong><code>TAB</code></strong><strong> apr√®s avoir commenc√© √† taper une commande ?</strong></p>
<p>La touche <code>TAB</code> sert √† compl√©ter un nom de commande partiellement entr√©.</p>
</aside>
<p>Placez vous dans le mode utilisateur, puis effectuez la commande suivante.</p>
<pre>&gt;en</pre>
<ol type="1" start="6">
<li>Appuyer sur <code>ENTER</code>, dans quel mode √™tes-vous d√©sormais ?</li>
</ol>
<p>Maintenant retourner en user mode et taper la commande : </p>
<pre>&gt;e</pre>
<ol type="1" start="7">
<li>Recopier le message d&#39;erreur retourn√©. Quelle est la d√©finition de mot ambigu ? Que signifie cette erreur en fran√ßais ? </li>
</ol>
<aside class="special"><p><strong>‚ù§ Que fournit l&#39;aide contextuelle (?)</strong></p>
<p>L&#39;aide contextuelle (?) fournit la liste des commandes disponibles dans le mode en vigueur.</p>
</aside>
<p>Faire la commande : </p>
<pre>&gt;e?</pre>
<ol type="1" start="8">
<li>Quelles sont les commandes qui commencent par la lettre ‚Äòe&#39; dans le mode utilisateur ?</li>
</ol>
<ol type="1" start="9">
<li>En d√©duire la cause du message d&#39;erreur pr√©c√©dent ? </li>
</ol>
<aside class="special"><p><strong>üí° Commandes abr√©g√©s</strong></p>
<p>Il est possible d&#39;abr√©ger les commandes  jusqu&#39;au nombre minimal de caract√®res formant un ensemble de caract√®res unique. Par exemple, vous pouvez abr√©ger la commande <code>enable</code> en entrant <code>en</code> parce que <code>enable</code> est la seule commande qui commence par <code>en</code>. Par contre, l&#39;abr√©viation <code>e</code> ne fonctionne pas parce que plusieurs commandes d√©butent par <code>e</code>.</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Global Configuration Mode" duration="2">
        <p>Faisons maintenant des changements dans la configuration du switch. Pour se faire rentrer en mode de configuration global : </p>
<pre>#configuration terminal</pre>
<ol type="1" start="10">
<li>Quel mot dans l&#39;invite de commande indique que d√©sormais vous √™tes en mode de configuration global ?</li>
</ol>
<ol type="1" start="11">
<li>Quel est le raccourci de la commande <code>configure terminal</code> ?</li>
</ol>
<aside class="warning"><p><strong>Conseil</strong></p>
<p>Je vous conseille vivement de ne pas utiliser de raccourci pour le moment. En effet afin de retenir efficacement les commandes le cerveau aura plus de facilit√© √† retenir une commande explicite comme par ex <code>enable</code> plut√¥t qu&#39;une commande qui a peut de sens pour lui (ex <code>en</code>).</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Commande enable password" duration="5">
        <p>Maintenant nous voulons limiter l&#39;acc√®s aux configurations de l&#39;appareil. Cela permettra d&#39;√©viter que n&#39;importe qui puisse toucher √† notre switch ne puisse voir sa configuration..</p>
<p>Nous pouvons prot√©ger le mode d&#39;ex√©cution privil√©gi√© par un mot de passe. Ainsi si un utilisateur entre la commande <code>enable</code> il devra alors fournir un mdp (mot de passe).</p>
<p>Taper les commandes suivantes et remarquer les diff√©rences de sortie : </p>
<pre>Switch(config)#enable password?</pre>
<pre>Switch(config)#enable password ?</pre>
<p>Si vous utilisez le ? sans espace alors la CLI vous propose les commandes commen√ßant par les caract√®res <code>password</code>. Si vous faites un espace puis un ? alors la CLI vous propose les arguments possibles avec cette commande.</p>
<p class="image-container"><img style="width: 718.11px" src="img\\ba05bd31c051f50b.png"></p>
<p>Nous allons utiliser le deuxi√®me argument. Vous remarquerez qu&#39;il est √©crit en MAJUSCULE. Cela signifie que vous n&#39;avez pas besoin de taper <code>LINE</code> mais plut√¥t vous tapez une ligne qui sera consid√©r√©e comme le mdp.</p>
<p>Choisissez le mdp : <code>CCNA</code> puis taper le symbole <code>?</code> pour v√©rifier si d&#39;autres arguments sont disponibles.</p>
<p class="image-container"><img style="width: 718.11px" src="img\\aa4e27e8b8353b50.png"></p>
<p>Le <code><cr></code> signifie qu&#39;il n&#39;y a pas d&#39;autres arguments disponibles. Appuyer sur <code>ENTER</code></p>
<aside class="special"><p><strong>‚ù§ Quelle est la structure d&#39;une ligne de commande ? </strong></p>
<p class="image-container"><img style="width: 703.00px" src="img\\ab3e6e56221c47c5.png"></p>
</aside>
<h2 is-upgraded>Test du password</h2>
<p>Retourner au mode utilisateur</p>
<p>Essayer d&#39;acc√©der au mode d&#39;ex√©cution privil√©gi√©</p>
<p>PS : Si votre mdp ne fonctionne pas, peut √™tre que vous avez saisi par m√©garde un espace √† la suite de ce dernier. Donc essayer de faire <code>mdp+espace</code> puis <code>ENTER</code>.</p>
<p class="image-container"><img style="width: 424.00px" src="img\\867abaa212de1c32.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Commande running-config / startup-config" duration="10">
        <p>Sur un p√©riph√©rique Cisco il y a deux fichiers de configuration.</p>
<h2 is-upgraded>Le fichier running-config</h2>
<aside class="special"><p>‚ù§<strong> Que contient le fichier running-config ? Dans quelle m√©moire est-il stock√© ? </strong></p>
<p>Le fichier running-config contient la configuration active de l&#39;appareil. Il est stock√© dans la m√©moire vive (RAM).</p>
</aside>
<p>A chaque fois que vous faites des modifications de la configuration vous modifiez ce fichier.</p>
<h2 is-upgraded>Le fichier startup-config</h2>
<aside class="special"><p>‚ù§<strong> Que contient le fichier startup-config ? Dans quelle m√©moire est-il stock√© ?  </strong></p>
<p>Le fichier startup-config contient la configuration qui sera charg√©e lors du d√©marrage de l&#39;appareil. Il est stock√© dans la m√©moire vive non volatile (NVRAM).</p>
</aside>
<p>Ainsi le fichier running-config  est temporairement actif lorsque le p√©riph√©rique Cisco fonctionne (sous tension). Cependant, en cas de panne de courant ou de red√©marrage de l&#39;appareil, toutes les modifications de la configuration que vous n&#39;avez pas enregistr√©es seront perdues.</p>
<h2 is-upgraded>La commande show running-config</h2>
<p>Pour voir la configuration active, taper la commande : </p>
<p class="image-container"><img style="width: 718.11px" src="img\\d57b7ad9cb6c9834.png"></p>
<p>Naviguer dans ce fichier jusqu&#39;√† arriver √† la ligne concernant votre mdp : </p>
<p class="image-container"><img style="width: 718.11px" src="img\\ef90a00b11a56246.png"></p>
<h2 is-upgraded>La commande show startup-config</h2>
<p>Pour voir le fichier <code>startup-config</code>, taper la commande suivante : </p>
<p class="image-container"><img style="width: 718.11px" src="img\\e64ad63470f213a9.png"></p>
<p>Comme vous pouvez le lire pour l&#39;instant, ce fichier n&#39;existe pas.</p>
<p>Ainsi pour le moment lorsque vous d√©marrez l&#39;appareil, ce dernier charge en m√©moire le fichier de configuration par d√©faut car il ne trouve pas le <code>startup-config</code>.</p>
<h2 is-upgraded>Sauvegarder une configuration</h2>
<p>Pour sauvegarder la configuration actuelle, nous allons simplement la copier dans le fichier <code>startup-config</code>. Ainsi la prochaine fois que l&#39;appareil d√©marrera, il chargera la configuration que nous avons sauvegard√©e.</p>
<pre>Switch#copy running-config startup-config</pre>
<ol type="1" start="12">
<li>Maintenant afficher le fichier de <code>startup-config.</code> Quelle commande avez-vous utilis√©e ?</li>
</ol>
<p>Supposons que vous faites une modification de la configuration et que cela ne vous convient pas. Alors vous pouvez revenir √† la configuration initial en red√©marrant l&#39;appareil : </p>
<pre>Switch#reload</pre>
<p>Taper la commande pr√©c√©dente.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Am√©liorons la s√©curit√©" duration="5">
        <h2 is-upgraded>La commande service password-encryption</h2>
<p>Comme vous avez pu le constater, votre mdp est affich√© en clair dans le fichier de configuration. Cela repr√©sente un risque de s√©curit√©. Nous allons donc am√©liorer notre niveau de s√©curit√©.</p>
<p>Taper la commande : </p>
<pre>Switch(config)#service password-encryption</pre>
<ol type="1" start="13">
<li>Quel est le nouveau mdp affich√© dans le fichier de configuration ?</li>
</ol>
<p>Le num√©ro 7 situ√© avant le mdp signifie qu&#39;il a √©t√© encrypt√© en utilisant un algorithme Cisco.</p>
<p>Bien que notre mdp ne soit pas lisible en clair dans notre fichier de config, il reste n√©anmoins peu s√©curis√©. Aller sur le site suivant et entrer le mdp soit-disant encrypt√© : </p>
<p><a href="https://www.firewall.cx/cisco-technical-knowledgebase/cisco-routers/358-cisco-type7-password-crack.html" target="_blank">CISCO TYPE 7 PASSWORD CRACKER TOOL</a></p>
<p class="image-container"><img style="width: 676.00px" src="img\\d84a2dcb68f94f9a.png"></p>
<h2 is-upgraded>La commande enable secret</h2>
<p>La bonne nouvelle c&#39;est qu&#39;il existe une autre m√©thode permettant d&#39;utiliser une m√©thode d&#39;encryption plus robuste.</p>
<p>Au lieu de la commande enable password vous pouvez utiliser la commande : </p>
<pre>Switch(config)#enable secret Cisco</pre>
<p>Le nouveau mdp est d√©sormais :  Cisco</p>
<p>Afficher le fichier de configuration</p>
<p class="image-container"><img style="width: 718.11px" src="img\\44e8cfd10550e240.png"></p>
<p>Remarquer le nombre <code>5</code> apr√®s le mot <code>secret</code>. Cel√† indique que le mdp a √©t√© encrypt√© en utilisant un algorithme d&#39;encryption de type MD5, qui est bien plus s√©curis√© que l&#39;autre. De plus, remarquer que la config <code>enable password</code> est toujours en place. Cependant elle n&#39;est plus utilis√©e √©tant donn√© que la commande <code>enable secret</code> a √©t√© configur√©e.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Bilan" duration="15">
        <ol type="1" start="14">
<li>Pour chaque invites de commandes ci-dessous, indiqu√© √† quel mode il correspond : </li>
</ol>
<p class="image-container"><img style="width: 718.11px" src="img\\3b03221c45d2fc6e.png"></p>
<p>Donner une br√®ve description de chaque commandes ci-dessous : </p>
<ol type="1" start="15">
<li>  </li>
</ol>
<pre>Switch&gt;enable</pre>
<ol type="1" start="16">
<li>  </li>
</ol>
<pre>Switch&gt;configure terminal</pre>
<ol type="1" start="17">
<li>  </li>
</ol>
<pre>Switch(config)#enable password {password}</pre>
<ol type="1" start="18">
<li>  </li>
</ol>
<pre>Switch(config)#service password-encryption</pre>
<ol type="1" start="19">
<li>  </li>
</ol>
<pre>Switch&gt;enable secret {password}</pre>
<ol type="1" start="20">
<li>  </li>
</ol>
<pre>Switch(config)#show running-config</pre>
<ol type="1" start="21">
<li>  </li>
</ol>
<pre>Switch(config)#show startup-config</pre>
<ol type="1" start="22">
<li>  </li>
</ol>
<pre>Switch(config)#copy running-config startup-config</pre>
<ol type="1" start="23">
<li>Quel type de cable est utilis√© pour se connecter √† un switch via le port console ?</li>
<li>Vous tapez <code>enable</code> dans la CLI, puis vous entrez le mdp &#34;Ccna&#34;. Ce mdp n&#39;est pas accept√©. Quel pourrait-√™tre le probl√®me ?</li>
<li>Quel est la m√©thode la plus s√ªre pour prot√©ger l&#39;acc√®s au mode d&#39;ex√©cution privil√©gi√© ?</li>
<li>Si les commandes <code>enable password</code> et <code>enable secret</code> sont configur√©es, que va-t&#39;il se passer lorsque vous taperez <code>enable</code> ?</li>
<li>Vous entrez le raccourci de  commande <code>conf t</code>. Quelle est la version compl√®te de cette commande ?</li>
</ol>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/claat-public/native-shim.js"></script>
  <script src="https://storage.googleapis.com/claat-public/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/claat-public/prettify.js"></script>
  <script src="https://storage.googleapis.com/claat-public/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
